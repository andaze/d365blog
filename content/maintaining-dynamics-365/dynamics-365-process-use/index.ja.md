---
title:  "Dynamics 365 プロセスの作成"
draft: false
weight: 4
datetitle: "2017.08.23 | "
showinhome: true
showinaccordian: false
rightMenu: "artical"
jsonld: {
      "@context": "https://schema.org",
      "@type": "NewsArticle",
      "headline": "Article headline",
      "image": [
        "https://example.com/photos/1x1/photo.jpg",
        "https://example.com/photos/4x3/photo.jpg",
        "https://example.com/photos/16x9/photo.jpg"
       ],
      "datePublished": "2015-02-05T08:00:00+08:00",
      "dateModified": "2015-02-05T09:20:00+08:00",
      "author": {
        "@type": "Person",
        "name": "John Doe"
       },
       "publisher": {
        "@type": "Organization",
        "name": "Google",
        "logo": {
          "@type": "ImageObject",
          "url": "https://google.com/logo.jpg"
         }
       }
    }
---
{{< detailTopImage src="artical4.jpg" >}}
{{< authorImage src="authorimage.jpg" name="Takafumi Noguchi" linkdin="https://www.linkedin.com/in/tnoguchi1123531" >}}
<!-- Intro  -->
Dynamics 365 には、プロセスという機能により、ビジネスの手法をモデル化して特定の処理を自動化することができます。プロセスには主に4種類があります。（以下、技術情報より引用）

<!-- Quate Box -->
ワークフロー。 世界の現実のビジネス プロセスをモデル化および自動化するには、このプロセスを使用します。 これらのプロセスは、バックグラウンドまたはリアルタイムに実行されるように構成され、必要に応じてユーザー入力を必要することができます。 ワークフロー プロセスは、指定した条件に基づいて自動的に開始することも、ユーザーが手動で開始することもできます。     
アクション。Microsoft Dynamics 365 標準のインストールで使用できない新しい操作を作成したり、異種複数の操作を単一の操作に組み合わせるために、このプロセスを使用します。 たとえば、サポート コール センターの場合、create、assign、および　setstate の操作を新しい単一の “エスカレート” 操作に組み合わせることができます。      
業務プロセス フロー。 業務プロセス フローのビジュアル化を作成するには、このプロセスを使用します。 ユーザーは営業または顧客サービス プロセスのさまざまな段階から導かれます。 各ステージで、固有の手順を実行すると、次のステージに移動します。 ステップを追加または削除するか、ステージの順序を変更するか、またはプロセス フローに新しいエンティティを追加することで、プロセスのフローをカスタマイズできます。     
ダイアログ。 開始および完了まで実行するためにユーザー入力を必要とする対話型の段階的のデータ入力フォームを作成するには、この手順を使用します。 ダイアログ プロセスを開始すると、ウィザード風のインターフェイスが表示され、ウィザードの各ページを進むにつれ、適切な選択またはデータの入力を行うことができます。     


引用元： [https://msdn.microsoft.com/ja-jp/library/gg309471.aspx](https://msdn.microsoft.com/ja-jp/library/gg309471.aspx)

今回は、これらプロセスの中でも一番頻度高く利用されるワークフローについて触れていきましょう。

## ワークフローの作成方法
まずは、ワークフローを作成します。「設定」メニューから「プロセス」をクリックします。
<!-- Image= workflow1.jpg -->
{{< imagedisplay src="workflow1.jpg" >}}

左上の「新規」ボタンをクリックすると、プロセス作成画面になります。まずは、プロセス名、プロセスの種類、対象となるエンティティなどを選択していきましょう。

今回の例では、

プロセス名：テストワークフロー０１    
カテゴリ：ワークフロー    
エンティティ：取引先企業     
種類：空のプロセスの新規作成 (※)     
このワークフローをバックグラウンドで実行する（奨励）：✔     

として「OK」をクリックします。
<!-- Image= workflow2.jpg -->
{{< imagedisplay src="workflow2.jpg" >}}

(※) 種類では、テンプレートからプロセスを作成することも可能ですが、事前にプロセステンプレートを作成する必要があります。作成方法について後ほどご紹介します。


ワークフロー作成画面は以下の通りになります。各エリアを説明していきましょう。
<!-- Image= workflow3.jpg -->
{{< imagedisplay src="workflow3.jpg" >}}

①  プロセスの種類を選びます。通常は「プロセス」ですが、「プロセス テンプレート」としてテンプレート化することもできます。テンプレートにする場合は、通常のプロセスとして実行などはできない点は注意が必要です。   
②  ワークフローをオンデマンド（手動実行）できるようにするかどうか、子プロセスとして実行させるかを選択します。    
③  ワークフローが実行されるスコープ（ユーザー・部署・部署配下・組織全体）と実行のトリガー（開始時期）を選択できます。    
④ ワークフローが正常に完了したらそのログを自動削除するかどうかを設定できます。多数のレコードにワークフローを実行すると、かなりの容量を使用することになるため、ここにはチェックをいれておくことが奨励されています。もしテストなどで結果を確認する場合は、一時的にチェックを外せばいいでしょう。     
⑤ 具体的なステップを作成する箇所です。条件やレコードの作成・更新・削除、割り当てなどを行うことができます。またサードパーティのツールをソリューションとしてインポートすれば、共有設定や、加算・積算などの簡易計算、上位エンティティから下位エンティティへプロセス実行などを幅広く行うことができるようになります。（こちらについては応用編でご紹介します）  

それでは、今回はテストとして、レコード作成時に、取引先企業の「分類」フィールドを 顧客 に設定するシンプルなワークフローを作成してみましょう。
 

まずは、スコープは「組織全体」、開始時期を「レコードの作成」とします。それ以外は特に変更はしません。
<!-- Image= workflow4.jpg -->
{{< imagedisplay src="workflow4.jpg" >}}

そしてステップを追加します。「レコードの更新」を選択します。
<!-- Image= workflow5.jpg -->
{{< imagedisplay src="workflow5.jpg" >}}

すると、取引先企業のフィールドが表示されるため、その中から、「分類」フィールドを選択して、顧客 を選択したら、保存して閉じます。
<!-- Image= workflow6.jpg -->
{{< imagedisplay src="workflow6.jpg" >}}

あとは、作成したステップに適当な説明を記載して、保存をクリックした後、「アクティブ化」を行います。
<!-- Image= workflow7.jpg -->
{{< imagedisplay src="workflow7.jpg" >}}

これで簡単なプロセスは作成されました。あとは、動かしてみます。

取引先企業を新規に作成して、保存をクリックしてみましょう。プロセスは基本的に「保存」をクリックしたら動き出しますので、必ず保存します。
<!-- Image= workflow8.jpg -->
{{< imagedisplay src="workflow8.jpg" >}}

すると先ほどのワークフローが動作していることがわかります。

プロセス作成画面の、「プロセス セッション」をクリックします。すると先ほど作成した企業がプロセス処理されていることがわかります。ステータスが「成功しました」となれば処理は完了です。
<!-- Image= workflow9.jpg -->
{{< imagedisplay src="workflow9.jpg" >}}

ワークフローはとても奥が深く、使いこなせばほとんどの処理を行うことができます。

Dynamics 365 が掲げる「コードレスカスタマイズ」の神髄でもあるので、ぜひ理解を深めていきましょう。

引き続き、ワークフローについてはパターン化して触れていきますのでお楽しみに。